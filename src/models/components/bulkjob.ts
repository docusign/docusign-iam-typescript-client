/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";
import {
  BulkJobActionTemplates,
  BulkJobActionTemplates$inboundSchema,
} from "./bulkjobactiontemplates.js";
import {
  BulkJobConstraints,
  BulkJobConstraints$inboundSchema,
} from "./bulkjobconstraints.js";
import {
  BulkJobEmbedded,
  BulkJobEmbedded$inboundSchema,
} from "./bulkjobembedded.js";
import { BulkJobLinks, BulkJobLinks$inboundSchema } from "./bulkjoblinks.js";
import {
  BulkJobMetadata,
  BulkJobMetadata$inboundSchema,
} from "./bulkjobmetadata.js";
import { BulkJobStatus, BulkJobStatus$inboundSchema } from "./bulkjobstatus.js";

export type BulkJob = {
  actionTemplates?: BulkJobActionTemplates | undefined;
  /**
   * Contains detailed information about the BulkJob including presigned upload links, document IDs, etc
   */
  embedded?: BulkJobEmbedded | undefined;
  links?: BulkJobLinks | undefined;
  /**
   * Describes the limits of a bulk job, or an action associated with a bulk job
   */
  constraints?: BulkJobConstraints | undefined;
  createdAt: Date;
  expiresAt: Date;
  /**
   * User provided reference ID for this job
   */
  externalJobId?: string | undefined;
  /**
   * Id for job
   */
  id: string;
  message?: string | undefined;
  /**
   * Properties about THIS request/response, not the job resource itself
   */
  metadata: BulkJobMetadata;
  modifiedAt: Date;
  /**
   * User provided name for this job
   */
  name: string;
  /**
   * Job lifecycle states:
   *
   * @remarks
   * * OPEN - Job created and accepting documents
   * * UPLOAD_COMPLETE - All documents have been received, and processing has not yet started
   * * IN_PROGRESS - Documents are being processed (AI extraction)
   * * COMPLETE - The full e2e process is complete
   * * FAILED - System error prevented job execution
   * * CANCELED - User initiated request to cancel a job
   */
  status: BulkJobStatus;
  statusEnum: Array<string>;
  /**
   * ISO 8601 duration for job validity
   */
  ttlPeriod?: string | undefined;
};

/** @internal */
export const BulkJob$inboundSchema: z.ZodType<BulkJob, z.ZodTypeDef, unknown> =
  z.object({
    _action_templates: BulkJobActionTemplates$inboundSchema.optional(),
    _embedded: BulkJobEmbedded$inboundSchema.optional(),
    _links: BulkJobLinks$inboundSchema.optional(),
    constraints: BulkJobConstraints$inboundSchema.optional(),
    created_at: z.string().datetime({ offset: true }).transform(v =>
      new Date(v)
    ),
    expires_at: z.string().datetime({ offset: true }).transform(v =>
      new Date(v)
    ),
    external_job_id: z.string().optional(),
    id: z.string(),
    message: z.string().optional(),
    metadata: BulkJobMetadata$inboundSchema,
    modified_at: z.string().datetime({ offset: true }).transform(v =>
      new Date(v)
    ),
    name: z.string(),
    status: BulkJobStatus$inboundSchema,
    status_enum: z.array(z.string()),
    ttl_period: z.string().optional(),
  }).transform((v) => {
    return remap$(v, {
      "_action_templates": "actionTemplates",
      "_embedded": "embedded",
      "_links": "links",
      "created_at": "createdAt",
      "expires_at": "expiresAt",
      "external_job_id": "externalJobId",
      "modified_at": "modifiedAt",
      "status_enum": "statusEnum",
      "ttl_period": "ttlPeriod",
    });
  });

export function bulkJobFromJSON(
  jsonString: string,
): SafeParseResult<BulkJob, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => BulkJob$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'BulkJob' from JSON`,
  );
}
